#!/usr/bin/env php
<?php

$autoloaders = array(
    __DIR__ . '/../vendor/autoload.php',
    __DIR__ . '/../../../../autoload.php'
);

foreach ($autoloaders as $loader) {
    if (file_exists($loader)) {
        require $loader;
        break;
    }

    die('You need to install your dependencies using "composer.phar install"' . PHP_EOL);
}

use JamesHalsall\Licenser\Licenser;
use JamesHalsall\Licenser\Command\LicenserCommand;
use Symfony\Component\Console\Application;
use Symfony\Component\Finder\Finder;

$container = new Pimple();
$container['licenser'] = function() {
    return new Licenser(new Finder());
};

$container['command'] = function($c) {
    return new LicenserCommand($c['licenser']);
};

$application = new Application('Licenser', Licenser::VERSION);
$application->add($container['command']);
$application->run();
